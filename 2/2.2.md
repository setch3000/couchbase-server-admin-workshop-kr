# 2.2 애플리케이션 클라이언트 구성

### 1. 애플리케이션 클라이언트에 연결합니다.

이제 Couchbase Server가 정상적으로 작동하며 로컬 클라이언트에서의 새로운 쓰기 요청을 수락하는 것을 확인했으므로, 다음 단계로 새 클라이언트 애플리케이션 서버를 설정하고 구성하겠습니다.

할당된 애플리케이션 클라이언트 서버는 다음과 같은 특징을 가지고 있습니다:

```
Amazon Instance Type: t2.large
ECUs: 3
vCPU: 2
Memory: 8.00 GiB
Storage: 20-30 GB
Network performance: moderate
CloudWatch Monitoring: disabled
Tenancy: Shared tenancy (multi-tenant hardware)
Cost: $0.11 per hour
```



PuTTY를 실행하고 애플리케이션 서버에 연결합니다. PuTTY를 시작한 후, 애플리케이션 서버 VM의 Amazon DNS 이름을 입력합니다. 이 DNS 이름은 이 실습과 함께 강사가 제공한 Cluster-IPs 스프레드시트에서 확인할 수 있습니다.

연결 유형은 SSH이며 포트는 22로 설정합니다.

PuTTY에 강사가 제공한 애플리케이션 서버의 공용 호스트 이름을 사용해 `ec2-user@<public hostname>` 을 입력한 뒤, SSH 옆의 +를 클릭하여 옵션을 확장하고 마지막으로 Auth를 선택합니다.



<figure><img src="../.gitbook/assets/image (11).png" alt=""><figcaption></figcaption></figure>



인증을 위한 개인 키 파일을 선택하려면 Browse를 클릭하세요.

<figure><img src="../.gitbook/assets/image (12).png" alt=""><figcaption></figcaption></figure>



강사가 제공한 `Amazon-Private-Key.ppk` 파일을 선택하세요.

다음으로 Session을 클릭하고 세션 이름을 `AppServer`로 저장한 후 `Save`를 클릭하세요.

<figure><img src="../.gitbook/assets/image (13).png" alt=""><figcaption></figcaption></figure>



이제 `AppServer`를 선택한 뒤 `Open`을 클릭하여 이 VM에 연결하세요.

<figure><img src="../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

성공적으로 연결되기 전에 서버의 rsa2 키에 대한 메시지가 나타나면 Yes를 클릭해야 합니다.

<figure><img src="../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>



## 2. 클라이언트 서버를 구성하고 Couchbase를 설치합니다.

다음으로, 방화벽을 끄는 등의 작업을 통해 이 서버를 구성하고 Couchbase Server를 설치하여 `cbworkloadgen`(및 기타 몇 가지 도구)을 쉽게 사용할 수 있도록 하겠습니다. 이 서버에서 실제로 Couchbase를 실행할 필요는 없으므로 설치 직후 Couchbase 서비스를 바로 중지할 예정입니다.

root 사용자로 전황합니다:

```bash
sudo -i
```



호스트 이름을 AppServer로 설정합니다:

```bash
hostnamectl set-hostname AppServer
hostnamectl status
```

출력:

```bash
Static hostname: AppServer
         Icon name: computer-vm
           Chassis: vm
        Machine ID: 4e7e0a894c2447ff9b480516eae4d8e7
           Boot ID: 4f0c256433074176beeb2b55785938e3
    Virtualization: xen
  Operating System: Red Hat Enterprise Linux 8.4 (Ootpa)
       CPE OS Name: cpe:/o:redhat:enterprise_linux:8.4:GA
            Kernel: Linux 4.18.0-305.el8_0.x86_64
      Architecture: x86-64
```



메타 패키지를 다운로드하세요.

```bash
curl -O https://packages.couchbase.com/releases/couchbase-release/couchbase-release-1.0.noarch.rpm
```



메타 패키지를 설치합니다. 메타 패키지는 yum이 Couchbase Server 설치에 필요한 모든 패키지와 의존성을 가져올 수 있도록 필요한 정보를 설치합니다.

```bash
sudo rpm -i ./couchbase-release-1.0.noarch.rpm
```



Couchbase Server를 설치합니다.

```bash
sudo yum install couchbase-server
```



Couchbase Server(및 필요한 의존성) 다운로드를 시작하고, 여러 개의 GPG 키를 가져오라는 메시지가 표시됩니다. 각 메시지에서 y를 입력하여 승인하고 계속 진행하세요.

```
Transaction Summary
=========================================================================================================================================
Install  1 Package

Total download size: 542 M
Installed size: 1.5 G
Is this ok [y/N]: y
Downloading Packages:
couchbase-server-enterprise-7.6.7-linux.x86_64.rpm                                                        15 MB/s | 542 MB     00:36    
-----------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                     15 MB/s | 542 MB     00:36     
Couchbase release linux x86_64 yum repository                                                            1.6 MB/s | 1.7 kB     00:00    
Importing GPG key 0xE9CB0900:
 Userid     : "Couchbase Repository Key (For signing yum/apt repositories) <build-team@couchbase.com>"
 Fingerprint: 359E 9675 6BB3 F419 D4B2 6560 9BBE 2052 E9CB 0900
 From       : /etc/pki/rpm-gpg/GPG-KEY-COUCHBASE-2.0
Is this ok [y/N]: y
Key imported successfully
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                                 1/1 
  Running scriptlet: couchbase-server-7.6.7-6706.x86_64                                                                              1/1 
Minimum RAM required  : 4 GB
System RAM configured : 7.50 GB

Minimum number of processors required : 4 cores
Number of processors on the system    : 2 cores


  Installing       : couchbase-server-7.6.7-6706.x86_64                                                                              1/1 
  Running scriptlet: couchbase-server-7.6.7-6706.x86_64                                                                              1/1 
Created symlink '/etc/systemd/system/multi-user.target.wants/couchbase-server.service' → '/usr/lib/systemd/system/couchbase-server.service'.

You have successfully installed Couchbase Server.
Please browse to http://Couchbase01:8091/ to configure your server.
Refer to https://docs.couchbase.com for additional resources.

Please note that you have to update your firewall configuration to
allow external connections to a number of network ports for full
operation. Refer to the documentation for the current list:
https://docs.couchbase.com/server/7.6/install/install-ports.html

By using this software you agree to the End User License Agreement.
See /opt/couchbase/LICENSE.txt.


Installed products updated.

Installed:
  couchbase-server-7.6.7-6706.x86_64                                                                                                     

Complete!
[root@Couchbase01 ~]# 

```

위의 메시지가 보인다면 Couchbase가 성공적으로 설치된 것입니다.



