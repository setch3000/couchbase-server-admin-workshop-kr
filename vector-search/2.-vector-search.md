# 2. Vector Search 실습

## 벡터 검색 수행하기

오른쪽 끝 근처에 있는 버튼을 클릭하여 color-index 행에서 Search 옵션을 선택합니다.

<figure><img src="../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption></figcaption></figure>



하기 쿼리를 Search 창에 붙여넣습니다.

`{ "fields": ["*"], "query": { "match_none": "" }, "knn": [ { "k": 2, "field": "colorvect_l2", "vector": [ 0, 0, 128 ] } ] }`



그런 다음 `Search` 버튼을 클릭하면, 아래 창에 결과가 표시됩니다.

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>





## 하이브리드 검색 (Hybrid Search) 수행하기

다음과 같이 벡터 필드 뿐만 아니라, 텍스트 필드도 쿼리 조건에 추가하여 hybrid search도 가능합니다.

하기 쿼리를 Search 창에 붙여넣습니다.



`{ "query": { "field": "brightness", "min": 70, "max": 80, "inclusive_min": false, "inclusive_max": true }, "knn": [ {"field": "colorvect_l2", "vector": [0.0, 0.0, 108.0], "k": 5} ], "fields": ["color","brightness"], "size": 5 }`



그런 다음 `Search` 버튼을 클릭하면, 아래 창에 결과가 표시됩니다.

검색 서비스(Search Service)는 knn 객체의 벡터 검색 결과와 전통적인 쿼리(query) 객체의 검색 결과를 OR 함수로 결합합니다.  즉, 두 검색 조건 중 하나라도 만족하는 문서를 결과로 포함시킵니다.

만약 같은 문서가 knn 검색과 쿼리 검색 모두에 일치한다면, 검색 서비스는 그 문서를 더 높은 순위로 평가하여 상단에 표시합니다.

예를 들어, “navy” 색상에 해당하는 문서는 가장 먼저 표시되고, 그 다음에는 navy와 유사한 색상이면서 brightness 필드 조건에도 일치하는 문서들이 순서대로 표시됩니다.\


<figure><img src="../.gitbook/assets/image (2) (1).png" alt=""><figcaption></figcaption></figure>



수고하셨습니다.





