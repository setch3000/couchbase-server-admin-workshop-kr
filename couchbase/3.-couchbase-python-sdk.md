# 3. Couchbase Python SDK 활용

## 허용된 IP 주소 추가하기 (Add an Allowed IP Address)

1. Operational 탭에서 작업하려는 클러스터 이름을 클릭합니다.
2. Settings → Allowed IP Addresses 메뉴로 이동합니다.

<figure><img src="../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption></figcaption></figure>



3. Add Allowed IP 버튼을 클릭합니다.
4. 허용할 IP 주소 또는 CIDR 블록 범위(IPv4 형식) 를 입력합니다.

* Add Current IP Address 클릭 시, 현재 사용 중인 디바이스의 외부 IP 주소가 자동으로 입력됩니다.
*   Allow Access from Anywhere 클릭 시, 모든 IP 주소에서 클러스터에 접근할 수 있도록 허용합니다.

    (이 옵션은 클러스터에 0.0.0.0/0 IP를 허용 IP로 추가합니다.)

{% hint style="info" %}
주의: Couchbase는 운영(Production) 클러스터에서 모든 IP 주소 접근을 허용(Allow Access from Anywhere)하는 것을 권장하지 않습니다.\
본 실습에서만 편의상 모든 IP 주소 접근을 허용(Allow Access from Anywhere)을 사용합니다.
{% endhint %}

6.  Time to retain 목록에서, Capella가 허용된 IP 주소를 유지하고 연결을 허용할 기간을 선택할 수 있습니다.

    설정한 시간이 지나면 IP 주소 항목이 만료되어, 해당 IP로부터의 연결이 더 이상 허용되지 않습니다.\

7.  (선택 사항) Comment 필드에

    해당 IP 주소를 허용한 이유를 기록할 수 있습니다.

    * 조직 내 다른 사용자들이 참고할 수 있습니다.
    * 최대 128자까지 입력 가능합니다.



8. 모든 설정이 완료되면 Add Allowed IP 클릭하여 저장합니다.

> 💡 새로 추가한 IP 주소가 실제로 클러스터에 접근 가능해지기까지는 몇 분이 걸릴 수 있습니다.\
> IP를 추가하자마자 연결을 시도할 경우, 일시적으로 연결이 차단될 수 있습니다.



<figure><img src="../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>



Allowed IP Address가 추가되면, 아래와 같이 목록에 보여집니다.

<figure><img src="../.gitbook/assets/image (28).png" alt=""><figcaption></figcaption></figure>







## 클러스터 액세스 자격 증명 생성하기

클러스터 액세스 자격 증명(Cluster Access Credentials)을 사용하면 Couchbase SDK 및 기타 지원 도구를 통해 버킷 데이터를 읽거나 쓸 수 있습니다.

{% hint style="info" %}
클러스터 액세스 자격 증명을 생성하려면,

자격 증명을 생성하려는 클러스터가 포함된 프로젝트의 Project Owner 역할이 있어야 합니다.
{% endhint %}



1. 클러스터 액세스 페이지 열기

조직의 `Projects` 탭에서 작업하려는 프로젝트를 클릭합니다.

<figure><img src="../.gitbook/assets/image (24).png" alt=""><figcaption></figcaption></figure>



`Operational` 탭에서 해당 클러스터 선택합니다.

<figure><img src="../.gitbook/assets/image (25).png" alt=""><figcaption></figcaption></figure>



`Settings` 탭 클릭한 후, 왼쪽 네비게이션 메뉴에서 `Access Control` 클릭합니다.

<figure><img src="../.gitbook/assets/image (26).png" alt=""><figcaption></figcaption></figure>



2. `Create Access` 버튼을 클릭힙니다.

<figure><img src="../.gitbook/assets/image (27).png" alt=""><figcaption></figcaption></figure>



3. 클러스터 액세스 이름과 비밀번호 설정합니다.

* Cluster Access Name
  * 최대 35자까지 가능
  * 다음 특수문자는 포함할 수 없음: ( ) < > @ , ; : \ " / \[ ] ? = { }\

* Password
  * 최소 8자 이상
  * 반드시 대문자, 소문자, 숫자, 특수문자 각각 하나 이상 포함해야 함
  * 허용 특수문자: ^ $ ( ) ? " ! @ # % , ' : \_ \~ \` = + -
  * Auto-generate password 옵션 선택 시, 규칙에 맞는 임의의 비밀번호가 자동 생성됩니다.\
    이 비밀번호는 다시 확인할 수 없으므로, 생성 직후 반드시 안전한 위치에 복사해 두어야 합니다.

{% hint style="info" %}
여기서 설정한 액세스 이름과 비밀번호는 클러스터에 연결할 때 필요합니다.
{% endhint %}

<figure><img src="../.gitbook/assets/image (4).png" alt=""><figcaption></figcaption></figure>



4. 버킷 수준 접근 권한 설정 (Bucket-level Access)
   * Bucket 드롭다운에서 접근하려는 버킷 선택
   * 이 실습에서는 All Buckets 선택하여 클러스터 내의 모든 현재 및 미래의 버킷에 접근 권한을 부여합니다.
5. 스코프 수준 접근 권한 설정 (Scope-level Access)
   * Scope 드롭다운에서 접근할 스코프 선택
   * 이 실습에서는 All Scopes 선택하여, 선택한 버킷 내의 모든 현재 및 미래의 스코프에 접근합니다.
6. 컬렉션 수준 접근 권한 설정 (Collection-level Access)
   * Collection 드롭다운에서 접근할 컬렉션 선택 가능합니다.
   * 이 실습에서는 All Collections 선택하여, 선택한 스코프 내의 모든 현재 및 미래의 컬렉션에 접근합니다.
7. 접근 수준 설정 (Access Level)
   * Access 드롭다운에서 접근 권한 선택 가능합니다.
   * 이 실습에서는 Read/Write를 선택합니다.

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>







## Couchbase Python SDK 실습

1. Connect → SDKs 메뉴로 이동합니다.
2. Public Connection String을 확인하고 복사해 둡니다.&#x20;

{% hint style="info" %}
이 문자열은 클러스터에 연결할 때 필요합니다.
{% endhint %}

<figure><img src="../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure>



3. 아래 링크를 클릭하여 Google Colab에서 실습 코드가 있는 Jupyter notebook 파일을 엽니다.

[https://colab.research.google.com/drive/1o9CrpzpJuPVGLiT9KGzMq4u6cWtMwtiC?usp=sharing](https://colab.research.google.com/drive/1o9CrpzpJuPVGLiT9KGzMq4u6cWtMwtiC?usp=sharing)



노트북 셀 내의 코드 중, 생성하신 cluster 정보에 맞춰서 값들을 수정해 주셔야 하는 부분이 있습니다.

<figure><img src="../.gitbook/assets/image (29).png" alt=""><figcaption></figcaption></figure>



강사의 설명과 가이드에 따라서 셀을 하나씩 실행시키면서 실습을 진행합니다.\
실행 중, 아래와 같은 경고창이 나오면, Run anyway를 실행하여 진행합니다.

{% hint style="info" %}
본 실습 노트북은 강사가 직접 작성한 코드로, 참가자의 Google 계정 정보나 개인 데이터를 수집하거나 외부로 전송하지 않습니다.

Colab의 “Warning: This notebook was not authored by Google” 메시지는\
Google이 아닌 사용자가 만든 노트북임을 알리는 일반적인 안내 메시지입니다.

안심하고 Run anyway를 클릭하여 실습을 진행하시면 됩니다.
{% endhint %}

<div data-full-width="false"><figure><img src="../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure></div>



강사의 설명과 함께 진행하시면 하기와 같은 결과를 확인하실 수 있습니다.

<figure><img src="../.gitbook/assets/image (30).png" alt=""><figcaption></figcaption></figure>





